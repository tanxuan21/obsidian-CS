
内核態 用戶態
> 中斷是用戶態變爲内核態的唯一途徑


## 中斷

來源與CPU的内部還是外部，也就是是否與當前執行的指令相關

#### 内中斷
- 異常指令，結束進程(abort)
- 陷入指令（系統調用）(trap)
- 故障，可以修復的一些問題(fault)
> 陷入指令不是特權指令
> 中斷指令是特權指令
#### 外中斷
- 并發運行，時鐘片段到達，中斷
- IO設備發送來的


## 系統調用

本質是一種獨裁政治，所有的用戶程序只能通過操作系統來請求資源


# 操作系統體系結構

## 大（微）内核

1. 進程管理，存儲器管理，設備管理等等
2. 時鐘管理，中斷處理，原語

包含1，2是 大内核
只包含2是 微内核
2是與硬件最相關的

微内核有效率問題，因爲1中的服務會非常平凡，每個服務都要向底層請求
微内核穩定，因爲大部分模塊不在内核裏。大内核裏但凡一個模塊崩潰，整個系統就崩潰


## 分層結構

每一層只能調用下一層的的接口

- 便於調試驗證，方便擴充層
- 效率低，難以抽象成分層結構

## 模塊化

主模塊+可加載模塊

- 邏輯清晰，易於維護，效率高，適應性高
- 互相調用，調試難度高，難以定義接口

## 外核

直接給用戶分配未經抽象的資源。比如磁盤的地址空間，直接給實際的地址而不是經過操作系統内核映射后的，這樣會提高訪問的效率
同時也減少了映射的過程，整體效率高
 系統更加複雜